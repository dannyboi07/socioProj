{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{useDispatch}from\"react-redux\";import{setStatusNotif}from\"../../reducers/statusNotifReducer\";import{dispatchRegister}from\"../../reducers/userReducer\";import\"./register.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),profileimg=_useState2[0],setProfileimg=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),profPrev=_useState4[0],setProfPrev=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),username=_useState8[0],setUsername=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),password=_useState10[0],setPassword=_useState10[1];var regFormRef=useRef(null);useEffect(function(){URL.revokeObjectURL(profileimg);setProfPrev(null);if(profileimg){regFormRef.current.classList.add(\"form-modify\");setProfPrev(URL.createObjectURL(profileimg));}else regFormRef.current.classList.remove(\"form-modify\");},[profileimg]);function handleSubmit(e){e.preventDefault();if(/ /.test(username)){dispatch(setStatusNotif(\"SET_ERR_NOTIF\",\"Username cannot contain spaces\",3));return;}var data=new FormData();if(profileimg){var imgFileName=document.getElementById(\"prof-img\").value;var dotIdx=imgFileName.lastIndexOf(\".\")+1;var fileExt=imgFileName.substring(dotIdx,imgFileName.length).toLowerCase();if(fileExt!==\"jpg\"&&fileExt!==\"jpeg\"&&fileExt!==\"png\"&&fileExt!==\"gif\"){dispatch(setStatusNotif(\"SET_ERR_NOTIF\",\"Profile image must be of type .jpg, .jpeg, .png, or .gif\",3));return;}data.append(\"profileimg\",profileimg);}data.append(\"name\",name.trim());data.append(\"username\",username);data.append(\"password\",password);// console.log(\"data\", data);\n// const userDetails = { name, username, password, data };\ndispatch(dispatchRegister(data));}function handleProfChange(e){// console.log(e.target.files[0]);\nsetProfileimg(e.target.files[0]);}return/*#__PURE__*/_jsxs(\"div\",{className:\"register-ctn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register-font\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Socio\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Join now and connect with others\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"register-form\",onSubmit:handleSubmit,encType:\"multipart/form-data\",ref:regFormRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"img-upload-ctn\",children:[\"Upload a profile image\",!profileimg&&/*#__PURE__*/_jsx(\"span\",{children:\"(A default will be chosen if not uploaded)\"}),profileimg&&/*#__PURE__*/_jsx(\"div\",{className:\"pre-profimg-ctn\",children:/*#__PURE__*/_jsx(\"img\",{className:\"pre-profimg\",src:profPrev,alt:\"Profile\"})}),/*#__PURE__*/_jsxs(\"label\",{className:\"img-upload-style-lbl\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[profileimg?\"Change \":\"Choose \",\"Picture\"]}),/*#__PURE__*/_jsx(\"input\",{id:\"prof-img\",type:\"file\",name:\"profileimg\",accept:\".jpg,.jpeg,.png,.gif\",onChange:function onChange(e){return handleProfChange(e);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg-inp-ctn\",children:[\"Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg-inp-ctn\",children:[\"Username\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reg-inp-ctn\",children:[\"Password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Create Account\"})]})]});}export default Register;// const [testing, setTesting] = useState(null);\n// function testOnSubmit(e) {\n//   e.preventDefault();\n//   const data = new FormData();\n//   data.append(\"testimg\", testing);\n//   fetch(\"http://localhost:3500/api/register/test\", {\n//     method: \"POST\",\n//     body: data\n//   }).then(res => console.log(res))\n//   .catch(err => console.error(err));\n// }\n/* <form onSubmit={testOnSubmit}>\n<input type=\"file\" name=\"testimg\" onChange={(e) => setTesting(e.target.files[0])}/>\n<button type=\"submit\">Submit</button>\n</form> */","map":{"version":3,"sources":["/home/runner/work/socioProj/socioProj/src/components/Register/Register.js"],"names":["React","useState","useEffect","useRef","useDispatch","setStatusNotif","dispatchRegister","Register","dispatch","profileimg","setProfileimg","profPrev","setProfPrev","name","setName","username","setUsername","password","setPassword","regFormRef","URL","revokeObjectURL","current","classList","add","createObjectURL","remove","handleSubmit","e","preventDefault","test","data","FormData","imgFileName","document","getElementById","value","dotIdx","lastIndexOf","fileExt","substring","length","toLowerCase","append","trim","handleProfChange","target","files"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { setStatusNotif } from \"../../reducers/statusNotifReducer\";\nimport { dispatchRegister } from \"../../reducers/userReducer\";\nimport \"./register.css\";\n\nfunction Register() {\n\tconst dispatch = useDispatch();\n\n\tconst [profileimg, setProfileimg] = useState(null);\n\tconst [profPrev, setProfPrev] = useState(null);\n\tconst [name, setName] = useState(\"\");\n\tconst [username, setUsername] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\n\tconst regFormRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tURL.revokeObjectURL(profileimg);\n\t\tsetProfPrev(null);\n\n\t\tif (profileimg) {\n\t\t\tregFormRef.current.classList.add(\"form-modify\");\n\t\t\tsetProfPrev(URL.createObjectURL(profileimg));\n\t\t} else regFormRef.current.classList.remove(\"form-modify\");\n\t}, [profileimg]);\n\n\tfunction handleSubmit(e) {\n\t\te.preventDefault();\n\n\t\tif (/ /.test(username)) {\n\t\t\tdispatch(\n\t\t\t\tsetStatusNotif(\n\t\t\t\t\t\"SET_ERR_NOTIF\",\n\t\t\t\t\t\"Username cannot contain spaces\",\n\t\t\t\t\t3,\n\t\t\t\t),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = new FormData();\n\n\t\tif (profileimg) {\n\t\t\tconst imgFileName = document.getElementById(\"prof-img\").value;\n\t\t\tconst dotIdx = imgFileName.lastIndexOf(\".\") + 1;\n\t\t\tconst fileExt = imgFileName\n\t\t\t\t.substring(dotIdx, imgFileName.length)\n\t\t\t\t.toLowerCase();\n\t\t\tif (\n\t\t\t\tfileExt !== \"jpg\" &&\n\t\t\t\tfileExt !== \"jpeg\" &&\n\t\t\t\tfileExt !== \"png\" &&\n\t\t\t\tfileExt !== \"gif\"\n\t\t\t) {\n\t\t\t\tdispatch(\n\t\t\t\t\tsetStatusNotif(\n\t\t\t\t\t\t\"SET_ERR_NOTIF\",\n\t\t\t\t\t\t\"Profile image must be of type .jpg, .jpeg, .png, or .gif\",\n\t\t\t\t\t\t3,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdata.append(\"profileimg\", profileimg);\n\t\t}\n\n\t\tdata.append(\"name\", name.trim());\n\t\tdata.append(\"username\", username);\n\t\tdata.append(\"password\", password);\n\t\t// console.log(\"data\", data);\n\n\t\t// const userDetails = { name, username, password, data };\n\t\tdispatch(dispatchRegister(data));\n\t}\n\n\tfunction handleProfChange(e) {\n\t\t// console.log(e.target.files[0]);\n\t\tsetProfileimg(e.target.files[0]);\n\t}\n\n\treturn (\n\t\t<div className=\"register-ctn\">\n\t\t\t<div className=\"register-font\">\n\t\t\t\t<h1>Socio</h1>\n\n\t\t\t\t<p>Join now and connect with others</p>\n\t\t\t</div>\n\n\t\t\t<form\n\t\t\t\tclassName=\"register-form\"\n\t\t\t\tonSubmit={handleSubmit}\n\t\t\t\tencType=\"multipart/form-data\"\n\t\t\t\tref={regFormRef}\n\t\t\t>\n\t\t\t\t<div className=\"img-upload-ctn\">\n\t\t\t\t\tUpload a profile image\n\t\t\t\t\t{!profileimg && (\n\t\t\t\t\t\t<span>(A default will be chosen if not uploaded)</span>\n\t\t\t\t\t)}\n\t\t\t\t\t{profileimg && (\n\t\t\t\t\t\t<div className=\"pre-profimg-ctn\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"pre-profimg\"\n\t\t\t\t\t\t\t\tsrc={profPrev}\n\t\t\t\t\t\t\t\talt=\"Profile\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<label className=\"img-upload-style-lbl\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{profileimg ? \"Change \" : \"Choose \"}\n\t\t\t\t\t\t\tPicture\n\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"prof-img\"\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tname=\"profileimg\"\n\t\t\t\t\t\t\taccept=\".jpg,.jpeg,.png,.gif\"\n\t\t\t\t\t\t\tonChange={(e) => handleProfChange(e)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"reg-inp-ctn\">\n\t\t\t\t\tName\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"reg-inp-ctn\">\n\t\t\t\t\tUsername\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"reg-inp-ctn\">\n\t\t\t\t\tPassword\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<button type=\"submit\">Create Account</button>\n\t\t\t</form>\n\t\t</div>\n\t);\n}\n\nexport default Register;\n\n// const [testing, setTesting] = useState(null);\n\n// function testOnSubmit(e) {\n//   e.preventDefault();\n//   const data = new FormData();\n//   data.append(\"testimg\", testing);\n\n//   fetch(\"http://localhost:3500/api/register/test\", {\n//     method: \"POST\",\n//     body: data\n//   }).then(res => console.log(res))\n//   .catch(err => console.error(err));\n// }\n/* <form onSubmit={testOnSubmit}>\n<input type=\"file\" name=\"testimg\" onChange={(e) => setTesting(e.target.files[0])}/>\n<button type=\"submit\">Submit</button>\n</form> */\n"]},"metadata":{},"sourceType":"module"}