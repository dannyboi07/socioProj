{"ast":null,"code":"import _asyncToGenerator from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{followUser,unFollowUser}from\"../../services/userService\";import\"./profile.css\";import{Text}from\"../../styledComponents/Text\";import{Button}from\"../../styledComponents/Button\";import NameLink from\"../../styledComponents/NameLink\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(_ref){var name=_ref.name,username=_ref.username,profImgSrc=_ref.profImgSrc,postUid=_ref.postUid,friends=_ref.friends,inCmt=_ref.inCmt,inMain=_ref.inMain;var history=useHistory();var userDetails=useSelector(function(state){return state.user;});var _useState=useState(friends),_useState2=_slicedToArray(_useState,2),friend=_useState2[0],setFriend=_useState2[1];// function handleUsernameClick() {\n//   history.push(`/users/${username}`);\n// };\n// console.log(name, friends);\nfunction friendClickHandle(){return _friendClickHandle.apply(this,arguments);}function _friendClickHandle(){_friendClickHandle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(userDetails){_context.next=5;break;}history.push(\"/login\");_context.next=15;break;case 5:if(!friend){_context.next=11;break;}_context.next=8;return unFollowUser(postUid,userDetails.token);case 8:setFriend(!friend);_context.next=15;break;case 11:if(friend){_context.next=15;break;}_context.next=14;return followUser(postUid,userDetails.token);case 14:setFriend(!friend);case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return _friendClickHandle.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-ctn \".concat(inCmt?\"profile-ctn--cmt\":\"\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"prof-img-ctn \".concat(inCmt?\"prof-img-ctn--cmt\":\"\"),children:/*#__PURE__*/_jsx(\"img\",{src:profImgSrc,alt:\"Profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"prof-details-ctn\",children:[/*#__PURE__*/_jsx(Text,{children:name}),/*#__PURE__*/_jsxs(NameLink,{to:\"/users/\".concat(username),children:[\"@\",username]})]}),inMain&&(userDetails===null||userDetails===void 0?void 0:userDetails.uId)!==postUid&&/*#__PURE__*/_jsx(Button,{className:\"friend-btn \".concat(friend?\"unfrnd-btn\":\"frnd-btn\"),onClick:friendClickHandle,children:userDetails?friend?\"Unfriend\":\"Add friend\":\"Add friend\"})]});}export default Profile;// <img src=\"/checked-user.svg\" alt=\"Unfriend\"></img>\n// <img src='/add-user.svg' alt=\"Add Friend\"></img>\n// <img src=\"/add-user.svg\" alt=\"Add Friend\"></img>","map":{"version":3,"sources":["/home/runner/work/socioProj/socioProj/src/components/Profile/Profile.js"],"names":["React","useState","useHistory","useSelector","followUser","unFollowUser","Text","Button","NameLink","Profile","name","username","profImgSrc","postUid","friends","inCmt","inMain","history","userDetails","state","user","friend","setFriend","friendClickHandle","push","token","console","error","uId"],"mappings":"oXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,CAAqBC,YAArB,KAAyC,4BAAzC,CACA,MAAO,eAAP,CACA,OAASC,IAAT,KAAqB,6BAArB,CACA,OAASC,MAAT,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iCAArB,C,wFAEA,QAASC,CAAAA,OAAT,MAQG,IAPFC,CAAAA,IAOE,MAPFA,IAOE,CANFC,QAME,MANFA,QAME,CALFC,UAKE,MALFA,UAKE,CAJFC,OAIE,MAJFA,OAIE,CAHFC,OAGE,MAHFA,OAGE,CAFFC,KAEE,MAFFA,KAEE,CADFC,MACE,MADFA,MACE,CACF,GAAMC,CAAAA,OAAO,CAAGf,UAAU,EAA1B,CACA,GAAMgB,CAAAA,WAAW,CAAGf,WAAW,CAAC,SAACgB,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAjB,EAAD,CAA/B,CACA,cAA4BnB,QAAQ,CAACa,OAAD,CAApC,wCAAOO,MAAP,eAAeC,SAAf,eAEA;AACA;AACA;AACA;AARE,QAUaC,CAAAA,iBAVb,6JAUF,sJAEOL,WAFP,yBAGGD,OAAO,CAACO,IAAR,CAAa,QAAb,EAHH,kCAIaH,MAJb,gDAKShB,CAAAA,YAAY,CAACQ,OAAD,CAAUK,WAAW,CAACO,KAAtB,CALrB,QAMGH,SAAS,CAAC,CAACD,MAAF,CAAT,CANH,kCAOcA,MAPd,iDAQSjB,CAAAA,UAAU,CAACS,OAAD,CAAUK,WAAW,CAACO,KAAtB,CARnB,SASGH,SAAS,CAAC,CAACD,MAAF,CAAT,CATH,yFAYEK,OAAO,CAACC,KAAR,cAZF,qEAVE,oDA0BF,mBACC,aAAK,SAAS,uBAAiBZ,KAAK,CAAG,kBAAH,CAAwB,EAA9C,CAAd,wBACC,YAAK,SAAS,wBAAkBA,KAAK,CAAG,mBAAH,CAAyB,EAAhD,CAAd,uBACC,YAAK,GAAG,CAAEH,UAAV,CAAsB,GAAG,CAAC,SAA1B,EADD,EADD,cAKC,aAAK,SAAS,CAAC,kBAAf,wBACC,KAAC,IAAD,WAAOF,IAAP,EADD,cAGC,MAAC,QAAD,EAAU,EAAE,kBAAYC,QAAZ,CAAZ,eAAsCA,QAAtC,GAHD,GALD,CAWEK,MAAM,EAAI,CAAAE,WAAW,OAAX,EAAAA,WAAW,SAAX,QAAAA,WAAW,CAAEU,GAAb,IAAqBf,OAA/B,eACA,KAAC,MAAD,EACC,SAAS,sBACRQ,MAAM,CAAG,YAAH,CAAkB,UADhB,CADV,CAIC,OAAO,CAAEE,iBAJV,UAMEL,WAAW,CACTG,MAAM,CACL,UADK,CAEL,YAHQ,CAIT,YAVJ,EAZF,GADD,CA4BA,CAED,cAAeZ,CAAAA,OAAf,CAEA;AACA;AACA","sourcesContent":["import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { followUser, unFollowUser } from \"../../services/userService\";\nimport \"./profile.css\";\nimport { Text } from \"../../styledComponents/Text\";\nimport { Button } from \"../../styledComponents/Button\";\nimport NameLink from \"../../styledComponents/NameLink\";\n\nfunction Profile({\n\tname,\n\tusername,\n\tprofImgSrc,\n\tpostUid,\n\tfriends,\n\tinCmt,\n\tinMain,\n}) {\n\tconst history = useHistory();\n\tconst userDetails = useSelector((state) => state.user);\n\tconst [friend, setFriend] = useState(friends);\n\n\t// function handleUsernameClick() {\n\t//   history.push(`/users/${username}`);\n\t// };\n\t// console.log(name, friends);\n\n\tasync function friendClickHandle() {\n\t\ttry {\n\t\t\tif (!userDetails) {\n\t\t\t\thistory.push(\"/login\");\n\t\t\t} else if (friend) {\n\t\t\t\tawait unFollowUser(postUid, userDetails.token);\n\t\t\t\tsetFriend(!friend);\n\t\t\t} else if (!friend) {\n\t\t\t\tawait followUser(postUid, userDetails.token);\n\t\t\t\tsetFriend(!friend);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={`profile-ctn ${inCmt ? \"profile-ctn--cmt\" : \"\"}`}>\n\t\t\t<div className={`prof-img-ctn ${inCmt ? \"prof-img-ctn--cmt\" : \"\"}`}>\n\t\t\t\t<img src={profImgSrc} alt=\"Profile\" />\n\t\t\t</div>\n\n\t\t\t<div className=\"prof-details-ctn\">\n\t\t\t\t<Text>{name}</Text>\n\n\t\t\t\t<NameLink to={`/users/${username}`}>@{username}</NameLink>\n\t\t\t</div>\n\n\t\t\t{inMain && userDetails?.uId !== postUid && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName={`friend-btn ${\n\t\t\t\t\t\tfriend ? \"unfrnd-btn\" : \"frnd-btn\"\n\t\t\t\t\t}`}\n\t\t\t\t\tonClick={friendClickHandle}\n\t\t\t\t>\n\t\t\t\t\t{userDetails\n\t\t\t\t\t\t? friend\n\t\t\t\t\t\t\t? \"Unfriend\"\n\t\t\t\t\t\t\t: \"Add friend\"\n\t\t\t\t\t\t: \"Add friend\"}\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default Profile;\n\n// <img src=\"/checked-user.svg\" alt=\"Unfriend\"></img>\n// <img src='/add-user.svg' alt=\"Add Friend\"></img>\n// <img src=\"/add-user.svg\" alt=\"Add Friend\"></img>\n"]},"metadata":{},"sourceType":"module"}