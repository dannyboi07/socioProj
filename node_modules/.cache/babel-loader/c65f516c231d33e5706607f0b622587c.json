{"ast":null,"code":"import _asyncToGenerator from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{followUser,unFollowUser}from\"../../services/userService\";import\"./userprofile.css\";import UserProfPosts from\"../UserProfPosts/UserProfPosts\";import LoadingComp from\"../LoadingComp/LoadingComp\";import FailureComp from\"../FailureComp/FailureComp\";import{getUserThunk}from\"../../reducers/usersReducer\";import{setStatusNotif}from\"../../reducers/statusNotifReducer\";import{Text}from\"../../styledComponents/Text\";import{Button}from\"../../styledComponents/Button\";//import { SecBgDiv } from '../../styledComponents/SecBgDiv';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UserProfile(){var params=useParams();var dispatch=useDispatch();var user=useSelector(function(state){return state.user;});var failureState=useSelector(function(state){var _state$failure;return((_state$failure=state.failure)===null||_state$failure===void 0?void 0:_state$failure.type)===\"USER_PROF\";});var userProf=useSelector(function(state){return state.users;});var _useState=useState(userProf===null||userProf===void 0?void 0:userProf.friends),_useState2=_slicedToArray(_useState,2),follows=_useState2[0],setFollows=_useState2[1];var _useState3=useState({posts:true,blogs:false}),_useState4=_slicedToArray(_useState3,2),curView=_useState4[0],setCurView=_useState4[1];useEffect(function(){if(user){dispatch(getUserThunk(params.username,user.token));}else{dispatch(getUserThunk(params.username));}},[]);useEffect(function(){setFollows(userProf===null||userProf===void 0?void 0:userProf.friends);},[userProf]);if(failureState){return/*#__PURE__*/_jsx(\"div\",{className:\"user-prof-ctn--loading\",children:/*#__PURE__*/_jsx(FailureComp,{})});}if(!userProf){return/*#__PURE__*/_jsx(\"div\",{className:\"user-prof-ctn--loading\",children:/*#__PURE__*/_jsx(LoadingComp,{})});}function handleFollowBtnClick(){return _handleFollowBtnClick.apply(this,arguments);}function _handleFollowBtnClick(){_handleFollowBtnClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!follows){_context.next=14;break;}_context.prev=1;_context.next=4;return unFollowUser(userProf.u_id,user.token);case 4:setFollows(!follows);dispatch(setStatusNotif(\"SET_NEU_NOTIF\",\"You have unfriended \".concat(userProf.name)));_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(_context.t0);dispatch(setStatusNotif(\"SET_ERR_NOTIF\",\"Failed to send request to \".concat(userProf.name),2));case 12:_context.next=25;break;case 14:_context.prev=14;_context.next=17;return followUser(userProf.u_id,user.token);case 17:setFollows(!follows);dispatch(setStatusNotif(\"SET_NEU_NOTIF\",\"You are now friends with \".concat(userProf.name,\"!\")));_context.next=25;break;case 21:_context.prev=21;_context.t1=_context[\"catch\"](14);console.error(_context.t1);dispatch(setStatusNotif(\"SET_ERR_NOTIF\",\"Failed to send request to \".concat(userProf.name),2));case 25:case\"end\":return _context.stop();}}},_callee,null,[[1,8],[14,21]]);}));return _handleFollowBtnClick.apply(this,arguments);}function handlePostsClick(){setCurView({posts:true,blogs:false});}function handleBlogsClick(){setCurView({posts:false,blogs:true});}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-prof-ctn\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-prof-details-ctn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-prof-img-ctn\",children:/*#__PURE__*/_jsx(\"img\",{className:\"user-prof-img\",src:userProf.imgloc,alt:\"Profile picture\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-prof-right-ctn\",children:[/*#__PURE__*/_jsx(Text,{children:userProf.name}),/*#__PURE__*/_jsx(Text,{children:userProf.username}),/*#__PURE__*/_jsx(Text,{children:userProf.email}),user&&user.uId!==userProf.u_id?/*#__PURE__*/_jsx(Button,{id:\"user-flw-btn\",className:\"\".concat(follows?\"unfrnd-btn\":\"frnd-btn\"),onClick:handleFollowBtnClick,children:follows?\"Unfriend\":\"Add Friend\"}):/*#__PURE__*/_jsx(Button,{children:\"Edit Profile\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"user-cntnt-hr-top\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-cntnt-switch\",children:[userProf.posts&&/*#__PURE__*/_jsx(\"button\",{onClick:handlePostsClick,children:/*#__PURE__*/_jsx(Text,{children:\"Posts\"})}),true&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBlogsClick,children:/*#__PURE__*/_jsx(Text,{children:\"Blogs\"})})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"user-cntnt-hr-btm\"}),userProf&&userProf.posts&&curView.posts&&/*#__PURE__*/_jsx(UserProfPosts,{name:userProf.name,imgloc:userProf.imgloc,username:userProf.username,posts:userProf.posts})]});}export default UserProfile;","map":{"version":3,"sources":["/home/runner/work/socioProj/socioProj/src/components/UserProfile/UserProfile.js"],"names":["React","useState","useEffect","useParams","useSelector","useDispatch","followUser","unFollowUser","UserProfPosts","LoadingComp","FailureComp","getUserThunk","setStatusNotif","Text","Button","UserProfile","params","dispatch","user","state","failureState","failure","type","userProf","users","friends","follows","setFollows","posts","blogs","curView","setCurView","username","token","handleFollowBtnClick","u_id","name","console","error","handlePostsClick","handleBlogsClick","imgloc","email","uId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { followUser, unFollowUser } from \"../../services/userService\";\nimport \"./userprofile.css\";\nimport UserProfPosts from \"../UserProfPosts/UserProfPosts\";\nimport LoadingComp from \"../LoadingComp/LoadingComp\";\nimport FailureComp from \"../FailureComp/FailureComp\";\nimport { getUserThunk } from \"../../reducers/usersReducer\";\nimport { setStatusNotif } from \"../../reducers/statusNotifReducer\";\nimport { Text } from \"../../styledComponents/Text\";\nimport { Button } from \"../../styledComponents/Button\";\n//import { SecBgDiv } from '../../styledComponents/SecBgDiv';\n\nfunction UserProfile() {\n\tconst params = useParams();\n\tconst dispatch = useDispatch();\n\tconst user = useSelector((state) => state.user);\n\tconst failureState = useSelector(\n\t\t(state) => state.failure?.type === \"USER_PROF\",\n\t);\n\tconst userProf = useSelector((state) => state.users);\n\n\tconst [follows, setFollows] = useState(userProf?.friends);\n\tconst [curView, setCurView] = useState({ posts: true, blogs: false });\n\n\tuseEffect(() => {\n\t\tif (user) {\n\t\t\tdispatch(getUserThunk(params.username, user.token));\n\t\t} else {\n\t\t\tdispatch(getUserThunk(params.username));\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetFollows(userProf?.friends);\n\t}, [userProf]);\n\n\tif (failureState) {\n\t\treturn (\n\t\t\t<div className=\"user-prof-ctn--loading\">\n\t\t\t\t<FailureComp />\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (!userProf) {\n\t\treturn (\n\t\t\t<div className=\"user-prof-ctn--loading\">\n\t\t\t\t<LoadingComp />\n\t\t\t</div>\n\t\t);\n\t}\n\n\tasync function handleFollowBtnClick() {\n\t\tif (follows) {\n\t\t\ttry {\n\t\t\t\tawait unFollowUser(userProf.u_id, user.token);\n\t\t\t\tsetFollows(!follows);\n\t\t\t\tdispatch(\n\t\t\t\t\tsetStatusNotif(\n\t\t\t\t\t\t\"SET_NEU_NOTIF\",\n\t\t\t\t\t\t`You have unfriended ${userProf.name}`,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tdispatch(\n\t\t\t\t\tsetStatusNotif(\n\t\t\t\t\t\t\"SET_ERR_NOTIF\",\n\t\t\t\t\t\t`Failed to send request to ${userProf.name}`,\n\t\t\t\t\t\t2,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tawait followUser(userProf.u_id, user.token);\n\t\t\t\tsetFollows(!follows);\n\t\t\t\tdispatch(\n\t\t\t\t\tsetStatusNotif(\n\t\t\t\t\t\t\"SET_NEU_NOTIF\",\n\t\t\t\t\t\t`You are now friends with ${userProf.name}!`,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tdispatch(\n\t\t\t\t\tsetStatusNotif(\n\t\t\t\t\t\t\"SET_ERR_NOTIF\",\n\t\t\t\t\t\t`Failed to send request to ${userProf.name}`,\n\t\t\t\t\t\t2,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handlePostsClick() {\n\t\tsetCurView({ posts: true, blogs: false });\n\t}\n\n\tfunction handleBlogsClick() {\n\t\tsetCurView({ posts: false, blogs: true });\n\t}\n\n\treturn (\n\t\t<div className=\"user-prof-ctn\">\n\t\t\t<div className=\"user-prof-details-ctn\">\n\t\t\t\t<div className=\"user-prof-img-ctn\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"user-prof-img\"\n\t\t\t\t\t\tsrc={userProf.imgloc}\n\t\t\t\t\t\talt=\"Profile picture\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"user-prof-right-ctn\">\n\t\t\t\t\t<Text>{userProf.name}</Text>\n\t\t\t\t\t<Text>{userProf.username}</Text>\n\t\t\t\t\t<Text>{userProf.email}</Text>\n\n\t\t\t\t\t{user && user.uId !== userProf.u_id ? (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tid=\"user-flw-btn\"\n\t\t\t\t\t\t\tclassName={`${follows ? \"unfrnd-btn\" : \"frnd-btn\"}`}\n\t\t\t\t\t\t\tonClick={handleFollowBtnClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{follows ? \"Unfriend\" : \"Add Friend\"}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Button>Edit Profile</Button>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<hr className=\"user-cntnt-hr-top\" />\n\t\t\t<div className=\"user-cntnt-switch\">\n\t\t\t\t{userProf.posts && (\n\t\t\t\t\t<button onClick={handlePostsClick}>\n\t\t\t\t\t\t{<Text>Posts</Text>}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{true && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t<button onClick={handleBlogsClick}>\n\t\t\t\t\t\t\t{<Text>Blogs</Text>}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<hr className=\"user-cntnt-hr-btm\" />\n\t\t\t{userProf && userProf.posts && curView.posts && (\n\t\t\t\t<UserProfPosts\n\t\t\t\t\tname={userProf.name}\n\t\t\t\t\timgloc={userProf.imgloc}\n\t\t\t\t\tusername={userProf.username}\n\t\t\t\t\tposts={userProf.posts}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default UserProfile;\n"]},"metadata":{},"sourceType":"module"}