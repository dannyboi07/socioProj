{"ast":null,"code":"import _slicedToArray from\"/home/runner/work/socioProj/socioProj/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import{useSelector}from\"react-redux\";import{SecBgDiv}from\"../../styledComponents/SecBgDiv\";import\"./mediaCarousel.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MediaCarousel(_ref){var postId=_ref.postId,postImages=_ref.postImages,_ref$fullscreen=_ref.fullscreen,fullscreen=_ref$fullscreen===void 0?false:_ref$fullscreen,className=_ref.className,handleFsClick=_ref.handleFsClick,_ref$inMob=_ref.inMob,inMob=_ref$inMob===void 0?false:_ref$inMob,_ref$inPrev=_ref.inPrev,inPrev=_ref$inPrev===void 0?false:_ref$inPrev;var theme=useSelector(function(state){return{action:state.theme.action,bgPrim:state.theme.bgPrim};});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),imgCtnWidth=_useState2[0],setImgCtnWidth=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),imgPosInx=_useState4[0],setImgPosInx=_useState4[1];var touchStartX=useRef(0);var touchEndX=useRef(0);function slideRight(e){if(e)e.stopPropagation();if(imgPosInx[0]>-1*(imgPosInx.length-1)){setImgPosInx(imgPosInx.map(function(imgPos){return imgPos-1;}));}}function slideLeft(e){if(e)e.stopPropagation();if(imgPosInx[0]!==0){setImgPosInx(imgPosInx.map(function(imgPos){return imgPos+1;}));}}function handleSwipe(){if(touchStartX.current-touchEndX.current>75&&touchEndX.current<touchStartX.current)slideRight();if(touchEndX.current-touchStartX.current>75&&touchEndX.current>touchStartX.current)slideLeft();}function goLeftRightKey(e){if(e.key===\"ArrowRight\"){slideRight(e);}else if(e.key===\"ArrowLeft\"){slideLeft(e);}}useEffect(function(){if(postImages){var tempArr=[];for(var i=0;i<postImages.length;i++){tempArr.push(i);}setImgPosInx([].concat(tempArr));}var imgCtn=null;imgCtn=fullscreen?inMob?document.querySelector(\".flscrn-post-ctn__left-ctn\"):document.querySelector(\".flscrn-post-ctn__left-ctn\"):document.querySelector(\".post-images-ctn\");setTimeout(function(){setImgCtnWidth(imgCtn.offsetWidth);},250);function windowResizeListen(){setImgCtnWidth(imgCtn.offsetWidth);}if(!inPrev)window.addEventListener(\"resize\",windowResizeListen);return function(){if(inPrev)window.removeEventListener(\"resize\",windowResizeListen);};},[]);useEffect(function(){if(fullscreen||inPrev){document.addEventListener(\"keydown\",goLeftRightKey);return function(){return document.removeEventListener(\"keydown\",goLeftRightKey);};}},[imgPosInx]);return/*#__PURE__*/_jsxs(SecBgDiv,{onClick:handleFsClick,style:{height:fullscreen||inPrev?null:imgCtnWidth},className:fullscreen?\"post-images-ctn \".concat(className):\"post-images-ctn\",onTouchStart:function onTouchStart(e){return touchStartX.current=e.changedTouches[0].screenX;},onTouchEnd:function onTouchEnd(e){touchEndX.current=e.changedTouches[0].screenX;handleSwipe();},children:[/*#__PURE__*/_jsx(\"button\",{className:\"sld-lft-btn\",style:{display:imgPosInx[0]!==0&&window.screen.width>768?\"block\":\"none\"},onClick:slideLeft,children:/*#__PURE__*/_jsx(\"img\",{src:\"/left-chevron.svg\",alt:\"View left image\"})}),postImages.map(function(postImage,i){return/*#__PURE__*/_jsx(\"img\",{id:\"post-img-\".concat(postId,\"-\").concat(i),style:{left:imgCtnWidth*imgPosInx[i]||0}// ORed a default of 0 cause on initial render imgCtnW and imgPosInx are not initialized\n,className:\"post-content-img\",src:postImage// and the css left property gets a value of NaN on first render\n,alt:\"Post image \".concat(i+1),loading:\"lazy\"},i);}),/*#__PURE__*/_jsx(\"button\",{className:\"sld-rgt-btn\",style:{display:imgPosInx[0]>-1*(imgPosInx.length-1)&&window.screen.width>768?\"block\":\"none\"},onClick:slideRight,children:/*#__PURE__*/_jsx(\"img\",{src:\"/right-chevron.svg\",alt:\"View right image\"})}),/*#__PURE__*/_jsx(\"div\",{style:{width:20*postImages.length+\"px\"}// 20, as I want the children to be of width 10px, and space between them of 10, so one instance of that total amt (20px), multiplied by the length of the pictures array\n,className:\"indication-ctn\",children:postImages.map(function(img,i){return/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px solid \".concat(theme.action),backgroundColor:imgPosInx[i]===0?theme.action:theme.bgPrim},className:\"indicator\"},i);})})]});}export default MediaCarousel;","map":{"version":3,"sources":["/home/runner/work/socioProj/socioProj/src/components/MediaCarousel/MediaCarousel.js"],"names":["React","useState","useEffect","useRef","useSelector","SecBgDiv","MediaCarousel","postId","postImages","fullscreen","className","handleFsClick","inMob","inPrev","theme","state","action","bgPrim","imgCtnWidth","setImgCtnWidth","imgPosInx","setImgPosInx","touchStartX","touchEndX","slideRight","e","stopPropagation","length","map","imgPos","slideLeft","handleSwipe","current","goLeftRightKey","key","tempArr","i","push","imgCtn","document","querySelector","setTimeout","offsetWidth","windowResizeListen","window","addEventListener","removeEventListener","height","changedTouches","screenX","display","screen","width","postImage","left","img","border","backgroundColor"],"mappings":"2HAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,MAArC,KAAmD,OAAnD,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,QAAT,KAAyB,iCAAzB,CACA,MAAO,qBAAP,C,wFAEA,QAASC,CAAAA,aAAT,MAQG,IAPFC,CAAAA,MAOE,MAPFA,MAOE,CANFC,UAME,MANFA,UAME,sBALFC,UAKE,CALFA,UAKE,0BALW,KAKX,iBAJFC,SAIE,MAJFA,SAIE,CAHFC,aAGE,MAHFA,aAGE,iBAFFC,KAEE,CAFFA,KAEE,qBAFM,KAEN,6BADFC,MACE,CADFA,MACE,sBADO,KACP,aACF,GAAMC,CAAAA,KAAK,CAAGV,WAAW,CAAC,SAACW,KAAD,CAAW,CACpC,MAAO,CACNC,MAAM,CAAED,KAAK,CAACD,KAAN,CAAYE,MADd,CAENC,MAAM,CAAEF,KAAK,CAACD,KAAN,CAAYG,MAFd,CAAP,CAIA,CALwB,CAAzB,CAMA,cAAsChB,QAAQ,CAAC,IAAD,CAA9C,wCAAOiB,WAAP,eAAoBC,cAApB,eACA,eAAkClB,QAAQ,CAAC,EAAD,CAA1C,yCAAOmB,SAAP,eAAkBC,YAAlB,eACA,GAAMC,CAAAA,WAAW,CAAGnB,MAAM,CAAC,CAAD,CAA1B,CACA,GAAMoB,CAAAA,SAAS,CAAGpB,MAAM,CAAC,CAAD,CAAxB,CAEA,QAASqB,CAAAA,UAAT,CAAoBC,CAApB,CAAuB,CACtB,GAAIA,CAAJ,CAAOA,CAAC,CAACC,eAAF,GACP,GAAIN,SAAS,CAAC,CAAD,CAAT,CAAe,CAAC,CAAD,EAAMA,SAAS,CAACO,MAAV,CAAmB,CAAzB,CAAnB,CAAgD,CAC/CN,YAAY,CAACD,SAAS,CAACQ,GAAV,CAAc,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAAG,CAArB,EAAd,CAAD,CAAZ,CACA,CACD,CAED,QAASC,CAAAA,SAAT,CAAmBL,CAAnB,CAAsB,CACrB,GAAIA,CAAJ,CAAOA,CAAC,CAACC,eAAF,GACP,GAAIN,SAAS,CAAC,CAAD,CAAT,GAAiB,CAArB,CAAwB,CACvBC,YAAY,CAACD,SAAS,CAACQ,GAAV,CAAc,SAACC,MAAD,QAAYA,CAAAA,MAAM,CAAG,CAArB,EAAd,CAAD,CAAZ,CACA,CACD,CAED,QAASE,CAAAA,WAAT,EAAuB,CACtB,GACCT,WAAW,CAACU,OAAZ,CAAsBT,SAAS,CAACS,OAAhC,CAA0C,EAA1C,EACAT,SAAS,CAACS,OAAV,CAAoBV,WAAW,CAACU,OAFjC,CAICR,UAAU,GACX,GACCD,SAAS,CAACS,OAAV,CAAoBV,WAAW,CAACU,OAAhC,CAA0C,EAA1C,EACAT,SAAS,CAACS,OAAV,CAAoBV,WAAW,CAACU,OAFjC,CAICF,SAAS,GACV,CAED,QAASG,CAAAA,cAAT,CAAwBR,CAAxB,CAA2B,CAC1B,GAAIA,CAAC,CAACS,GAAF,GAAU,YAAd,CAA4B,CAC3BV,UAAU,CAACC,CAAD,CAAV,CACA,CAFD,IAEO,IAAIA,CAAC,CAACS,GAAF,GAAU,WAAd,CAA2B,CACjCJ,SAAS,CAACL,CAAD,CAAT,CACA,CACD,CAEDvB,SAAS,CAAC,UAAM,CACf,GAAIM,UAAJ,CAAgB,CACf,GAAI2B,CAAAA,OAAO,CAAG,EAAd,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG5B,UAAU,CAACmB,MAA/B,CAAuCS,CAAC,EAAxC,CAA4C,CAC3CD,OAAO,CAACE,IAAR,CAAaD,CAAb,EACA,CACDf,YAAY,WAAKc,OAAL,EAAZ,CACA,CAED,GAAIG,CAAAA,MAAM,CAAG,IAAb,CACAA,MAAM,CAAG7B,UAAU,CAChBG,KAAK,CACJ2B,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CADI,CAEJD,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CAHe,CAIhBD,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAJH,CAMAC,UAAU,CAAC,UAAM,CAChBtB,cAAc,CAACmB,MAAM,CAACI,WAAR,CAAd,CACA,CAFS,CAEP,GAFO,CAAV,CAIA,QAASC,CAAAA,kBAAT,EAA8B,CAC7BxB,cAAc,CAACmB,MAAM,CAACI,WAAR,CAAd,CACA,CACD,GAAI,CAAC7B,MAAL,CAAa+B,MAAM,CAACC,gBAAP,CAAwB,QAAxB,CAAkCF,kBAAlC,EAEb,MAAO,WAAM,CACZ,GAAI9B,MAAJ,CACC+B,MAAM,CAACE,mBAAP,CAA2B,QAA3B,CAAqCH,kBAArC,EACD,CAHD,CAIA,CA7BQ,CA6BN,EA7BM,CAAT,CA+BAzC,SAAS,CAAC,UAAM,CACf,GAAIO,UAAU,EAAII,MAAlB,CAA0B,CACzB0B,QAAQ,CAACM,gBAAT,CAA0B,SAA1B,CAAqCZ,cAArC,EAEA,MAAO,kBACNM,CAAAA,QAAQ,CAACO,mBAAT,CAA6B,SAA7B,CAAwCb,cAAxC,CADM,EAAP,CAEA,CACD,CAPQ,CAON,CAACb,SAAD,CAPM,CAAT,CASA,mBACC,MAAC,QAAD,EACC,OAAO,CAAET,aADV,CAEC,KAAK,CAAE,CAAEoC,MAAM,CAAEtC,UAAU,EAAII,MAAd,CAAuB,IAAvB,CAA8BK,WAAxC,CAFR,CAGC,SAAS,CACRT,UAAU,2BAAsBC,SAAtB,EAAoC,iBAJhD,CAMC,YAAY,CAAE,sBAACe,CAAD,QACZH,CAAAA,WAAW,CAACU,OAAZ,CAAsBP,CAAC,CAACuB,cAAF,CAAiB,CAAjB,EAAoBC,OAD9B,EANf,CASC,UAAU,CAAE,oBAACxB,CAAD,CAAO,CAClBF,SAAS,CAACS,OAAV,CAAoBP,CAAC,CAACuB,cAAF,CAAiB,CAAjB,EAAoBC,OAAxC,CACAlB,WAAW,GACX,CAZF,wBAcC,eACC,SAAS,CAAC,aADX,CAEC,KAAK,CAAE,CACNmB,OAAO,CACN9B,SAAS,CAAC,CAAD,CAAT,GAAiB,CAAjB,EAAsBwB,MAAM,CAACO,MAAP,CAAcC,KAAd,CAAsB,GAA5C,CACG,OADH,CAEG,MAJE,CAFR,CAQC,OAAO,CAAEtB,SARV,uBAUC,YAAK,GAAG,CAAC,mBAAT,CAA6B,GAAG,CAAC,iBAAjC,EAVD,EAdD,CA2BEtB,UAAU,CAACoB,GAAX,CAAe,SAACyB,SAAD,CAAYjB,CAAZ,qBACf,YAEC,EAAE,oBAAc7B,MAAd,aAAwB6B,CAAxB,CAFH,CAGC,KAAK,CAAE,CAAEkB,IAAI,CAAEpC,WAAW,CAAGE,SAAS,CAACgB,CAAD,CAAvB,EAA8B,CAAtC,CAA2C;AAHnD,CAIC,SAAS,CAAC,kBAJX,CAKC,GAAG,CAAEiB,SAAW;AALjB,CAMC,GAAG,sBAAgBjB,CAAC,CAAG,CAApB,CANJ,CAOC,OAAO,CAAC,MAPT,EACMA,CADN,CADe,EAAf,CA3BF,cAuCC,eACC,SAAS,CAAC,aADX,CAEC,KAAK,CAAE,CACNc,OAAO,CACN9B,SAAS,CAAC,CAAD,CAAT,CAAe,CAAC,CAAD,EAAMA,SAAS,CAACO,MAAV,CAAmB,CAAzB,CAAf,EACAiB,MAAM,CAACO,MAAP,CAAcC,KAAd,CAAsB,GADtB,CAEG,OAFH,CAGG,MALE,CAFR,CASC,OAAO,CAAE5B,UATV,uBAWC,YAAK,GAAG,CAAC,oBAAT,CAA8B,GAAG,CAAC,kBAAlC,EAXD,EAvCD,cAqDC,YACC,KAAK,CAAE,CAAE4B,KAAK,CAAE,GAAK5C,UAAU,CAACmB,MAAhB,CAAyB,IAAlC,CAA0C;AADlD,CAEC,SAAS,CAAC,gBAFX,UAIEnB,UAAU,CAACoB,GAAX,CAAe,SAAC2B,GAAD,CAAMnB,CAAN,qBACf,YAEC,KAAK,CAAE,CACNoB,MAAM,qBAAe1C,KAAK,CAACE,MAArB,CADA,CAENyC,eAAe,CACdrC,SAAS,CAACgB,CAAD,CAAT,GAAiB,CAAjB,CACGtB,KAAK,CAACE,MADT,CAEGF,KAAK,CAACG,MALJ,CAFR,CASC,SAAS,CAAE,WATZ,EACMmB,CADN,CADe,EAAf,CAJF,EArDD,GADD,CA0EA,CAED,cAAe9B,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { SecBgDiv } from \"../../styledComponents/SecBgDiv\";\nimport \"./mediaCarousel.css\";\n\nfunction MediaCarousel({\n\tpostId,\n\tpostImages,\n\tfullscreen = false,\n\tclassName,\n\thandleFsClick,\n\tinMob = false,\n\tinPrev = false,\n}) {\n\tconst theme = useSelector((state) => {\n\t\treturn {\n\t\t\taction: state.theme.action,\n\t\t\tbgPrim: state.theme.bgPrim,\n\t\t};\n\t});\n\tconst [imgCtnWidth, setImgCtnWidth] = useState(null);\n\tconst [imgPosInx, setImgPosInx] = useState([]);\n\tconst touchStartX = useRef(0);\n\tconst touchEndX = useRef(0);\n\n\tfunction slideRight(e) {\n\t\tif (e) e.stopPropagation();\n\t\tif (imgPosInx[0] > -1 * (imgPosInx.length - 1)) {\n\t\t\tsetImgPosInx(imgPosInx.map((imgPos) => imgPos - 1));\n\t\t}\n\t}\n\n\tfunction slideLeft(e) {\n\t\tif (e) e.stopPropagation();\n\t\tif (imgPosInx[0] !== 0) {\n\t\t\tsetImgPosInx(imgPosInx.map((imgPos) => imgPos + 1));\n\t\t}\n\t}\n\n\tfunction handleSwipe() {\n\t\tif (\n\t\t\ttouchStartX.current - touchEndX.current > 75 &&\n\t\t\ttouchEndX.current < touchStartX.current\n\t\t)\n\t\t\tslideRight();\n\t\tif (\n\t\t\ttouchEndX.current - touchStartX.current > 75 &&\n\t\t\ttouchEndX.current > touchStartX.current\n\t\t)\n\t\t\tslideLeft();\n\t}\n\n\tfunction goLeftRightKey(e) {\n\t\tif (e.key === \"ArrowRight\") {\n\t\t\tslideRight(e);\n\t\t} else if (e.key === \"ArrowLeft\") {\n\t\t\tslideLeft(e);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (postImages) {\n\t\t\tlet tempArr = [];\n\t\t\tfor (let i = 0; i < postImages.length; i++) {\n\t\t\t\ttempArr.push(i);\n\t\t\t}\n\t\t\tsetImgPosInx([...tempArr]);\n\t\t}\n\n\t\tlet imgCtn = null;\n\t\timgCtn = fullscreen\n\t\t\t? inMob\n\t\t\t\t? document.querySelector(\".flscrn-post-ctn__left-ctn\")\n\t\t\t\t: document.querySelector(\".flscrn-post-ctn__left-ctn\")\n\t\t\t: document.querySelector(\".post-images-ctn\");\n\n\t\tsetTimeout(() => {\n\t\t\tsetImgCtnWidth(imgCtn.offsetWidth);\n\t\t}, 250);\n\n\t\tfunction windowResizeListen() {\n\t\t\tsetImgCtnWidth(imgCtn.offsetWidth);\n\t\t}\n\t\tif (!inPrev) window.addEventListener(\"resize\", windowResizeListen);\n\n\t\treturn () => {\n\t\t\tif (inPrev)\n\t\t\t\twindow.removeEventListener(\"resize\", windowResizeListen);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (fullscreen || inPrev) {\n\t\t\tdocument.addEventListener(\"keydown\", goLeftRightKey);\n\n\t\t\treturn () =>\n\t\t\t\tdocument.removeEventListener(\"keydown\", goLeftRightKey);\n\t\t}\n\t}, [imgPosInx]);\n\n\treturn (\n\t\t<SecBgDiv\n\t\t\tonClick={handleFsClick}\n\t\t\tstyle={{ height: fullscreen || inPrev ? null : imgCtnWidth }}\n\t\t\tclassName={\n\t\t\t\tfullscreen ? `post-images-ctn ${className}` : \"post-images-ctn\"\n\t\t\t}\n\t\t\tonTouchStart={(e) =>\n\t\t\t\t(touchStartX.current = e.changedTouches[0].screenX)\n\t\t\t}\n\t\t\tonTouchEnd={(e) => {\n\t\t\t\ttouchEndX.current = e.changedTouches[0].screenX;\n\t\t\t\thandleSwipe();\n\t\t\t}}\n\t\t>\n\t\t\t<button\n\t\t\t\tclassName=\"sld-lft-btn\"\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay:\n\t\t\t\t\t\timgPosInx[0] !== 0 && window.screen.width > 768\n\t\t\t\t\t\t\t? \"block\"\n\t\t\t\t\t\t\t: \"none\",\n\t\t\t\t}}\n\t\t\t\tonClick={slideLeft}\n\t\t\t>\n\t\t\t\t<img src=\"/left-chevron.svg\" alt=\"View left image\" />\n\t\t\t</button>\n\n\t\t\t{postImages.map((postImage, i) => (\n\t\t\t\t<img\n\t\t\t\t\tkey={i}\n\t\t\t\t\tid={`post-img-${postId}-${i}`}\n\t\t\t\t\tstyle={{ left: imgCtnWidth * imgPosInx[i] || 0 }} // ORed a default of 0 cause on initial render imgCtnW and imgPosInx are not initialized\n\t\t\t\t\tclassName=\"post-content-img\"\n\t\t\t\t\tsrc={postImage} // and the css left property gets a value of NaN on first render\n\t\t\t\t\talt={`Post image ${i + 1}`}\n\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t/>\n\t\t\t))}\n\n\t\t\t<button\n\t\t\t\tclassName=\"sld-rgt-btn\"\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay:\n\t\t\t\t\t\timgPosInx[0] > -1 * (imgPosInx.length - 1) &&\n\t\t\t\t\t\twindow.screen.width > 768\n\t\t\t\t\t\t\t? \"block\"\n\t\t\t\t\t\t\t: \"none\",\n\t\t\t\t}}\n\t\t\t\tonClick={slideRight}\n\t\t\t>\n\t\t\t\t<img src=\"/right-chevron.svg\" alt=\"View right image\" />\n\t\t\t</button>\n\n\t\t\t<div\n\t\t\t\tstyle={{ width: 20 * postImages.length + \"px\" }} // 20, as I want the children to be of width 10px, and space between them of 10, so one instance of that total amt (20px), multiplied by the length of the pictures array\n\t\t\t\tclassName=\"indication-ctn\"\n\t\t\t>\n\t\t\t\t{postImages.map((img, i) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tborder: `1px solid ${theme.action}`,\n\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\timgPosInx[i] === 0\n\t\t\t\t\t\t\t\t\t? theme.action\n\t\t\t\t\t\t\t\t\t: theme.bgPrim,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName={\"indicator\"}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</SecBgDiv>\n\t);\n}\n\nexport default MediaCarousel;\n"]},"metadata":{},"sourceType":"module"}